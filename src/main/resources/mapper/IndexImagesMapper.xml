<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.spring.springboot.app.dao.IndexImagesMapper">
  <resultMap id="BaseResultMap" type="org.spring.springboot.app.domain.po.IndexImagesPO">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="article_id" jdbcType="VARCHAR" property="articleId" />
    <result column="image_name" jdbcType="VARCHAR" property="imageName" />
    <result column="image_path" jdbcType="VARCHAR" property="imagePath" />
    <result column="image_access_path" jdbcType="VARCHAR" property="imageAccessPath" />
    <result column="image_size" jdbcType="BIGINT" property="imageSize" />
    <result column="image_width" jdbcType="INTEGER" property="imageWidth" />
    <result column="image_height" jdbcType="VARCHAR" property="imageHeight" />
    <result column="remarks" jdbcType="VARCHAR" property="remarks" />
    <result column="create_by" jdbcType="VARCHAR" property="createBy" />
    <result column="create_date" jdbcType="TIMESTAMP" property="createDate" />
    <result column="update_by" jdbcType="VARCHAR" property="updateBy" />
    <result column="update_date" jdbcType="TIMESTAMP" property="updateDate" />
    <result column="disable_flag" jdbcType="BIT" property="disableFlag" />
    <result column="del_flag" jdbcType="BIT" property="delFlag" />
  </resultMap>

  <update id="updateImageArticleIdByPaths">
    update index_images set article_id = #{articleId}
    where image_access_path in
    <foreach collection="paths" index="index" item="path" close=")" open="(" separator=",">
      #{path}
    </foreach>
  </update>

  <update id="clearArticleId">
    update index_images set article_id = null where article_id = #{id}
  </update>
</mapper>